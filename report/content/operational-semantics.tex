\subsection{Operational Semantics}

\begin{notation}
Let $c$ be a command and $\sigma',\epsilon, and \omega'$ be the state, exceptional state, and heap after the execution of $c$ in $\rho$, $\sigma$ and $\omega$.

This is written:
\begin{equation}
(c,\rho,\sigma,\omega) \Downarrow (\sigma',\epsilon,\omega')
\end{equation}
\end{notation}

\begin{notation}
Let $a$ be an arithmetic expression and $n\in\mathbb{N}$ be the result of evaluating $a$ in $\sigma$.

This is written:
\begin{equation}
(a,\sigma) \Downarrow n
\end{equation}
\end{notation}

\begin{notation}
Let $b$ be a boolean expression and $\beta$ the boolean result of evaluating $b$ in $\sigma$.

This is written:
\begin{equation}
(b,\sigma) \Downarrow \beta
\end{equation}
\end{notation}

\begin{equation}
\frac{}{(SKIP, \rho, \sigma) \Downarrow (\sigma, \bot)}
\end{equation}

\begin{equation}
\frac{(a, \sigma) \Downarrow n \qquad \sigma[\sfrac{X}{n}] = \sigma'}{((X ::= a), \rho, \sigma) \Downarrow (\sigma', \bot)}
\end{equation}

\begin{equation}
\frac{(b, \sigma) \Downarrow true \qquad (c_1, \rho, \sigma) \Downarrow (\sigma', \varepsilon)}{((IFB\; b\; THEN\; c_1\; ELSE\; c_2\; FI), \rho, \sigma) \Downarrow (\sigma', \varepsilon)}
\end{equation}

\begin{equation}
\frac{(b, \sigma) \Downarrow false \qquad (c_2, \rho, \sigma) \Downarrow (\sigma', \varepsilon)}{((IFB\; b\; THEN\; c_1\; ELSE\; c_2\; FI), \rho, \sigma) \Downarrow (\sigma', \varepsilon)}
\end{equation}

\begin{equation}
\frac{(c_1, \rho, \sigma) \Downarrow (\sigma', \bot) \qquad (c_2, \rho, \sigma') \Downarrow (\sigma'', \bot)}{((c_1\; ;;\; c_2), \rho, \sigma) \Downarrow (\sigma'', \bot)}
\end{equation}

\begin{equation}
\frac{(c_1, \rho, \sigma) \Downarrow (\sigma', \bot) \qquad (c_2, \rho, \sigma') \Downarrow (\sigma'', \varepsilon) \qquad \varepsilon \neq \bot}{((c_1\; ;;\; c_2), \rho, \sigma) \Downarrow (\sigma'', \varepsilon)}
\end{equation}

\begin{equation}
\frac{(c_1, \rho, \sigma) \Downarrow (\sigma', \varepsilon) \qquad \varepsilon \neq \bot}{((c_1\; ;;\; c_2), \rho, \sigma) \Downarrow (\sigma', \varepsilon)}
\end{equation}

\begin{equation}
\frac{(b, \sigma) \Downarrow false}{((WHILE\; b\; DO\; c\; END), \rho, \sigma) \Downarrow (\sigma, \bot)}
\end{equation}

\begin{equation}
\frac{(b, \sigma) \Downarrow true \qquad (c, \rho, \sigma) \Downarrow (\sigma', \bot) \qquad ((WHILE\; b\; DO\; c\; END), \rho, \sigma') \Downarrow (\sigma'', \bot)}{((WHILE\; b\; DO\; c\; END), \rho, \sigma) \Downarrow (\sigma'', \bot)}
\end{equation}

\begin{equation}
\frac{(b, \sigma) \Downarrow true \qquad (c, \rho, \sigma) \Downarrow (\sigma', \varepsilon) \qquad \varepsilon \neq \bot}{((WHILE\; b\; DO\; c\; END), \rho, \sigma) \Downarrow (\sigma', \varepsilon)}
\end{equation}

\begin{equation}
\frac{(\tilde{a}, \sigma) \Downarrow \tilde{n}}{((THROW\; e,\; \tilde{a}), \rho, \sigma) \Downarrow (\sigma, (e, \tilde{n}))}
\end{equation}

\begin{equation}
\frac{(c_1, \rho, \sigma) \Downarrow (\sigma', \bot)}{((TRY\; c_1\; CATCH\; e,\; \tilde{X}\; DO\; c_2\; END), \rho, \sigma) \Downarrow (\sigma', \bot)}
\end{equation}

\begin{equation}
\frac{(c_1, \rho, \sigma) \Downarrow (\sigma', (e, \tilde{n})) \qquad (c_2, \rho, \sigma[\sfrac{\tilde{X}}{\tilde{n}}]) \Downarrow (\sigma'', \varepsilon)}{((TRY\; c_1\; CATCH\; e,\; \tilde{X}\; DO\; c_2\; END), \rho, \sigma) \Downarrow (\sigma'', \varepsilon)}
\end{equation}

\begin{equation}
\frac{e \neq e' \qquad (c_1, \rho, \sigma) \Downarrow (\sigma', (e, \tilde{n}))}{((TRY\; c_1\; CATCH\; e',\; \tilde{X}\; DO\; c_2\; END), \rho, \sigma) \Downarrow (\sigma', (e, \tilde{n}))}
\end{equation}

\begin{equation}
\frac
{(\tilde{a},\rho,\sigma) \Downarrow \tilde{v} \quad \sigma''= emp[\sfrac{\tilde{v}}{\tilde{p}}] \quad (c, \rho, \sigma'') \Downarrow \sigma''' \quad (r,\rho,\sigma''') \Downarrow w \quad \sigma' = \sigma[\sfrac{x}{w}] \quad \rho(f) = (c, \tilde{p}, r)}
{((CALL\; F \; X  \; \tilde{a}), \rho, \sigma) \Downarrow \sigma'}
\end{equation}